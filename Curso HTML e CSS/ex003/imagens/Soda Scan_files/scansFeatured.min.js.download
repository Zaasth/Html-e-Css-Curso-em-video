(()=>{function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}new(function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=window.location.pathname,a=e.substring(e.lastIndexOf("/")+1);if(this.featuredBannersList=$(".bxslider",$("#destaques-grupos")),this.featuredBannersPager=$("#bx-pager",$("#destaques-grupos")),this.featuredItem=$("li[data-featured-slider-item]",$("#destaques-grupos")).clone(),this.featuredPagerItem=$("li[data-featured-slider-pager-item]",$("#destaques-grupos")).clone(),$("#destaques-grupos").length)return this.getFeaturedMangas(a).then(function(e){this.buildHtml(e),this.initSlider()}.bind(this)).catch((function(){}))}var a,n,r;return a=t,(n=[{key:"getFeaturedMangas",value:function(e){return new Promise((function(t,a){$.ajax({url:"/scanlators/getFeaturedSeries/"+e+".json",type:"GET",dataType:"JSON",success:function(e){(0==e.length||null==e.featured[0]&&null==e.featured.scanInfos)&&a(!0),t(e)},error:function(){a("Houve um erro ao processar sua requisição! Atualize a página e tente novamente!")}})}))}},{key:"buildHtml",value:function(e){var t=e.featured||e,a=e._isLoggedIn,n=0;$(".bxslider",$("#destaques-grupos")).html(""),$("#bx-pager",$("#destaques-grupos")).html(""),$.each(t,function(e,t){var r=new Date(t.date);"scanInfos"==e&&(e=n),(r.getTime()<=Date.now()||"number"==typeof e)&&(this.featuredBannersList.append(this.buildFeaturedItem(this.featuredItem.clone()[0],t)),this.featuredBannersPager.append(this.buildFeaturedPage(this.featuredPagerItem.clone()[0],t,e,a))),n++}.bind(this)),window.IMGtoSVG()}},{key:"buildFeaturedItem",value:function(e,t){return $(e).find(".featured-manga-link").attr("href",t.link||"#"),$(e).find(".destaque-wrap").css("background-color","#"+(t.hex_color||"acacac")),$(e).find(".destaque-image").css("background-image","url('"+t.featured_image+"')"),$(e)}},{key:"buildFeaturedPage",value:function(e,t,a,n){if($(e).find("a").attr("data-slide-index",a),$(e).find("a").css("background-color","#"+(t.hex_color||"acacac")),$(e).find(".name").html(t.series_name),n){var r=window.UserTags._filterUserTag(t._user_tags);r.length&&$(e).find("a").append(r)}return $(e)}},{key:"initSlider",value:function(){$(".destaque-tags ul li").each((function(){$(this).data("offsetRight",$(this).offset().left+$(this).width())}));var e=[];$(".destaque-tags li").each((function(t,a){e[t]=$(a).offset()})),$(".bxslider").bxSlider({auto:!0,pause:5e3,pagerCustom:"#bx-pager",controls:!1,mode:"fade",onSlideAfter:function(e,t,a){var n=$(".destaque-tags .active").parent();$(n).parent().parent().scrollLeft($(n).parent().parent().scrollLeft()+n.position().left-.75*n.width())}})}}])&&e(a.prototype,n),r&&e(a,r),Object.defineProperty(a,"prototype",{writable:!1}),t}())})();